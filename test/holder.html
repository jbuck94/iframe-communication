<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang=""> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="apple-touch-icon" href="apple-touch-icon.png">

        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/bootstrap-theme.min.css">
        <link rel="stylesheet" href="css/main.css">

        <script src="js/vendor/modernizr-2.8.3-respond-1.4.2.min.js"></script>
        <script type="text/javascript" src="js/porthole.min.js"></script>


        <script type="text/javascript">
            // var guestDomain = 'jbuck.test.staging.ucdev.net/';
            var guestDomain = 'jbuck.test.staging.ucdev.net';

            function onMessage1(messagEvent) {
                if (messageEvent.origin == "http://" + guestDomain) {
                    if (messagEvent.data["color"]) {
                        document.body.bgColor = essageEvent.data["color"];
                    }
                    if (messageEvent.data["expanded"]) {
                        el = document.getElementById('guestFrame');
                        el.setAttribute('height', "250px");
                    } 
                    else {
                        el = document.getElementById('guestFrame');
                        el.setAttribute('height', "150px");
                    }
                }
            }

            function onMessage2(messageEvent) { 
                if (messageEvent.origin == "http://" + guestDomain) {
                    if (messageEvent.data["color"]) {
                        document.body.bgColor = messageEvent.data["color"];
                    }
                    if (messageEvent.data["expanded"]) {
                        el = document.getElementById('guestFrame');
                        el.setAttribute('width', "600px");
                    }
                    else {
                        el = document.getElementById('guestFrame');
                        el.setAttribute('width', "500px");
                    }
                }
            }

            var windowProxy1;
            window.onload=function(){ 
                // Create a proxy window to send to and receive message from the guest iframe
                windowProxy1 = new Porthole.WindowProxy('http://' + guestDomain + '/proxy.html', 'guestFrame');
                windowProxy1.addEventListener(onMessage1);
            };
        
        </script>


    </head>
    <body>
    
    <div>
        <input onclick="windowProxy.post({'color':'red'})" type="submit" value="Color Frame1 Red" /> 
        <input onclick="windowProxy.post({'color':'yellow'})" type="submit" value="Color Frame2 Yellow" />
    </div>

    <div class="container">
        <div>
            <iframe id="guestFrame" name="guestFrame" width="500px" height="150px" frameborder="1" src="http://jbuck.test.staging.ucdev.net/"></iframe>
        </div>  
    </div>


        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.11.2.min.js"><\/script>')</script>
        <script src="js/vendor/bootstrap.min.js"></script>
        <script src="js/main.js"></script>
    </body>
</html>
